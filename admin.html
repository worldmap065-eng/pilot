<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Pilot Studio | Visual Experience</title>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root { --accent: #0071e3; --sidebar-w: 320px; --topbar-h: 60px; }
        * { box-sizing: border-box; font-family: 'SF Pro Display', sans-serif; }
        body { margin: 0; background: #111; color: white; overflow: hidden; height: 100vh; }

        /* Top Bar */
        .top-bar { 
            height: var(--topbar-h); background: #1d1d1f; border-bottom: 1px solid #333;
            display: flex; justify-content: space-between; align-items: center; padding: 0 20px;
        }

        /* Layout */
        .main-layout { display: flex; height: calc(100vh - var(--topbar-h)); }

        /* Sidebars */
        .sidebar { 
            width: var(--sidebar-w); background: #1d1d1f; border-left: 1px solid #333; 
            padding: 20px; display: flex; flex-direction: column; gap: 20px; overflow-y: auto;
        }

        /* The Canvas (The real site) */
        .canvas-area { 
            flex: 1; background: #111; display: flex; justify-content: center; align-items: center; 
            padding: 20px; position: relative;
        }
        
        .browser-container {
            width: 100%; height: 100%; max-width: 1200px; background: white;
            border-radius: 12px; overflow: hidden; box-shadow: 0 30px 60px rgba(0,0,0,0.5);
            position: relative; transition: 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        iframe { width: 100%; height: 100%; border: none; }

        /* Widget Box */
        .widget {
            background: #2c2c2e; padding: 15px; border-radius: 10px; cursor: grab;
            border: 1px solid #3a3a3c; transition: 0.2s; font-size: 14px;
        }
        .widget:hover { background: #3a3a3c; border-color: var(--accent); }

        /* Device Switcher */
        .device-btn { background: #333; border: none; color: white; padding: 5px 15px; border-radius: 5px; cursor: pointer; }
        .device-btn.active { background: var(--accent); }

        /* Action Buttons */
        .btn-primary { background: var(--accent); color: white; border: none; padding: 10px 20px; border-radius: 20px; font-weight: 600; cursor: pointer; }
    </style>
</head>
<body>

<div class="top-bar">
    <div style="font-weight: 700; font-size: 18px;">PILOT STUDIO <span style="font-weight: 300; opacity: 0.5;">VISUAL</span></div>
    <div class="device-switcher">
        <button class="device-btn active" onclick="resizePreview('100%')">Desktop</button>
        <button class="device-btn" onclick="resizePreview('768px')">Tablet</button>
        <button class="device-btn" onclick="resizePreview('390px')">Mobile</button>
    </div>
    <button class="btn-primary" onclick="saveAll()">Publish Live</button>
</div>

<div class="main-layout">
    <div class="sidebar">
        <h3 style="font-size: 14px; color: #86868b;">TOOLS</h3>
        <div class="widget" draggable="true" ondragstart="drag(event, 'button')">â• Add Button</div>
        <div class="widget" draggable="true" ondragstart="drag(event, 'table')">ğŸ“Š Add Table</div>
        <div class="widget" draggable="true" ondragstart="drag(event, 'text')">ğŸ“ Add Text Block</div>
        
        <hr style="border: 0; border-top: 1px solid #333; width: 100%;">
        
        <h3 style="font-size: 14px; color: #86868b;">PAGES</h3>
        <div id="page-list">
            <div class="widget" style="background: var(--accent);">Home (index.html)</div>
        </div>
        <button onclick="addPage()" style="background: none; border: 1px dashed #555; color: #86868b; padding: 10px; border-radius: 10px; cursor: pointer;">+ New Page</button>
    </div>

    <div class="canvas-area">
        <div class="browser-container" id="preview-frame">
            <iframe src="index.html" id="site-iframe"></iframe>
        </div>
    </div>

    <div class="sidebar">
        <h3 style="font-size: 14px; color: #86868b;">PROPERTIES</h3>
        <div id="properties-panel">
            <p style="font-size: 12px; color: #555;">Select an element on the site to edit properties.</p>
        </div>
    </div>
</div>

<script>
    function resizePreview(width) {
        const frame = document.getElementById('preview-frame');
        frame.style.width = width;
        if(width !== '100%') {
            frame.style.maxWidth = width;
        } else {
            frame.style.maxWidth = '1200px';
        }
    }

    function drag(ev, type) {
        ev.dataTransfer.setData("type", type);
    }

    // ×¤×•× ×§×¦×™×” ×œ×”×•×¡×¤×ª ×“×¤×™×
    function addPage() {
        const name = prompt("Enter page name (e.g., about):");
        if(name) {
            const list = document.getElementById('page-list');
            const div = document.createElement('div');
            div.className = "widget";
            div.innerText = name + ".html";
            list.appendChild(div);
        }
    }

    // ×× ×’× ×•×Ÿ ×”×–×¨×§×ª ×§×•×“ ×œ×¢×¨×™×›×” ×‘×ª×•×š ×”-iframe
    const iframe = document.getElementById('site-iframe');
    iframe.onload = function() {
        const doc = iframe.contentDocument || iframe.contentWindow.document;
        
        // ×”×¤×™×›×ª ×›×œ ×”×˜×§×¡×˜×™× ×‘××ª×¨ ×œ×¢×¨×™×›×™× ×‘×œ×—×™×¦×”
        doc.querySelectorAll('h1, p, span').forEach(el => {
            el.contentEditable = true;
            el.addEventListener('input', () => {
                console.log("Text changed:", el.innerText);
            });
        });

        // ××¤×©×¨×•×ª ×œ×”×–×™×– ××œ×× ×˜×™× (Drag & Drop ×¤× ×™××™)
        doc.addEventListener('dragover', (e) => e.preventDefault());
        doc.addEventListener('drop', (e) => {
            e.preventDefault();
            const type = e.dataTransfer.getData("type");
            if(type === 'button') {
                const btn = doc.createElement('button');
                btn.innerText = "New Button";
                btn.className = "main-btn"; // ××©×ª××© ×‘×§×œ××¡ ×”×§×™×™× ×‘××ª×¨
                e.target.appendChild(btn);
            }
        });
    };

    async function saveAll() {
        alert("Saving structure to server...");
        // ×›××Ÿ ×ª×‘×•× ×œ×•×’×™×§×ª ×”-POST ×œ×©×¨×ª ×©×©×•××¨×ª ××ª ×”-HTML ×”××¢×•×“×›×Ÿ ××”-iframe
    }
</script>
</body>
</html>
