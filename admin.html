<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Pilot | Control Center</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --p-color: #0071e3; --bg: #f5f5f7; }
        body { font-family: 'Inter', sans-serif; margin: 0; background: var(--bg); color: #1d1d1f; overflow: hidden; }
        
        /* Login Screen */
        #login-screen { position: fixed; inset: 0; background: white; z-index: 1000; display: flex; justify-content: center; align-items: center; transition: 0.5s; }
        .login-box { width: 320px; text-align: center; }
        .login-box img { width: 60px; margin-bottom: 20px; }
        .login-box input { width: 100%; padding: 15px; border-radius: 12px; border: 1px solid #d2d2d7; margin-bottom: 10px; font-size: 16px; text-align: center; }
        .login-btn { width: 100%; padding: 15px; background: black; color: white; border: none; border-radius: 12px; font-weight: 600; cursor: pointer; }

        /* Main Layout */
        #admin-panel { display: none; height: 100vh; grid-template-columns: 320px 1fr; }
        
        /* Sidebar */
        .sidebar { background: white; border-left: 1px solid #d2d2d7; padding: 30px; display: flex; flex-direction: column; gap: 25px; overflow-y: auto; }
        .nav-item { padding: 12px; border-radius: 10px; cursor: pointer; color: #86868b; font-weight: 500; transition: 0.2s; }
        .nav-item:hover, .nav-item.active { background: #f5f5f7; color: black; }

        /* Editor Fields */
        .editor-section { display: none; }
        .editor-section.active { display: block; }
        .field { margin-bottom: 20px; }
        label { font-size: 12px; font-weight: 600; color: #86868b; display: block; margin-bottom: 8px; }
        input[type="text"], textarea { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #d2d2d7; font-size: 14px; outline: none; }
        input[type="color"] { width: 100%; height: 40px; border: none; cursor: pointer; }

        /* Preview Canvas */
        .canvas { background: #e8e8ed; padding: 40px; display: flex; justify-content: center; overflow-y: auto; }
        .site-mockup { 
            width: 100%; max-width: 900px; background: white; border-radius: 20px; 
            box-shadow: 0 30px 60px rgba(0,0,0,0.12); min-height: 1200px; 
            padding: 60px; transition: 0.3s; transform-origin: top center;
        }

        /* Elements in Preview */
        .preview-hero-h1 { font-size: 56px; font-weight: 700; margin-bottom: 20px; }
        .preview-hero-p { font-size: 24px; color: #86868b; line-height: 1.5; }
        .preview-btn { display: inline-block; padding: 15px 35px; background: var(--p-color); color: white; border-radius: 30px; margin-top: 30px; font-weight: 600; }

        .save-btn { position: fixed; bottom: 30px; left: 30px; padding: 18px 40px; background: #0071e3; color: white; border: none; border-radius: 30px; font-weight: 600; box-shadow: 0 10px 20px rgba(0,113,227,0.3); cursor: pointer; z-index: 50; }
    </style>
</head>
<body>

<div id="login-screen">
    <div class="login-box">
        <h1>Pilot Studio</h1>
        <p>×”×›× ×¡ ×¡×™×¡××” ×œ× ×™×”×•×œ ×”××ª×¨</p>
        <input type="password" id="admin-pass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
        <button class="login-btn" onclick="tryLogin()">×›× ×™×¡×” ×œ××¢×¨×›×ª</button>
    </div>
</div>

<div id="admin-panel">
    <div class="sidebar">
        <h2 style="font-size: 20px;">×¢×•×¨×š ×”××ª×¨</h2>
        <div class="nav-item active" onclick="setTab('content')">ğŸ“ ×ª×•×›×Ÿ ×”××ª×¨</div>
        <div class="nav-item" onclick="setTab('design')">ğŸ¨ ×¢×™×¦×•×‘ ×•××•×ª×’</div>
        <div class="nav-item" onclick="setTab('settings')">âš™ï¸ ×”×’×“×¨×•×ª ×©×¨×ª</div>

        <div id="content" class="editor-section active">
            <div class="field">
                <label>×›×•×ª×¨×ª ×¨××©×™×ª</label>
                <input type="text" id="h-title" oninput="liveUpdate()">
            </div>
            <div class="field">
                <label>×ª×™××•×¨ (Hero Subtitle)</label>
                <textarea id="h-sub" oninput="liveUpdate()" rows="4"></textarea>
            </div>
            <div class="field">
                <label>×˜×§×¡×˜ ×›×¤×ª×•×¨ ××¨×›×–×™</label>
                <input type="text" id="h-btn" oninput="liveUpdate()">
            </div>
        </div>

        <div id="design" class="editor-section">
            <div class="field">
                <label>×¦×‘×¢ ××•×ª×’ ××¨×›×–×™</label>
                <input type="color" id="h-color" oninput="liveUpdate()">
            </div>
            <div class="field">
                <label>××¦×‘ ×ª×¦×•×’×”</label>
                <select id="h-mode" style="width:100%; padding:10px; border-radius:10px;" onchange="liveUpdate()">
                    <option value="light">×™×•× (Light)</option>
                    <option value="dark">×œ×™×œ×” (Dark)</option>
                </select>
            </div>
        </div>
    </div>

    <div class="canvas">
        <div class="site-mockup" id="site-preview">
            <nav style="display: flex; justify-content: space-between; margin-bottom: 100px;">
                <div style="font-weight: 700; font-size: 20px;">PILOT.</div>
                <div style="display: flex; gap: 20px; color: #86868b; font-size: 14px;">
                    <span>×‘×™×ª</span><span>×§×•×¨×¡×™×</span><span>×¦×•×¨ ×§×©×¨</span>
                </div>
            </nav>
            <div class="preview-hero-h1" id="p-title">×›×•×ª×¨×ª ×”××ª×¨</div>
            <div class="preview-hero-p" id="p-sub">×›××Ÿ ×™×•×¤×™×¢ ×ª×™××•×¨ ×”×¢×¡×§ ×©×œ×š ×©×™××©×•×š ×œ×§×•×—×•×ª ×—×“×©×™×</div>
            <div class="preview-btn" id="p-btn">×”×ª×—×™×œ×• ×¢×›×©×™×•</div>
        </div>
    </div>
</div>

<button class="save-btn" onclick="finalSave()">×¤×¨×¡× ×©×™× ×•×™×™× ×œ××ª×¨</button>

<script>
    let masterPassword = "";
    const API = "https://YOUR-URL.onrender.com"; // ×—×•×‘×” ×œ×¢×“×›×Ÿ

    function tryLogin() {
        const pass = document.getElementById('admin-pass').value;
        if(pass === "admin123") {
            masterPassword = pass;
            document.getElementById('login-screen').style.opacity = "0";
            setTimeout(() => {
                document.getElementById('login-screen').style.display = "none";
                document.getElementById('admin-panel').style.display = "grid";
            }, 500);
            loadData();
        } else { alert("×¡×™×¡××” ×©×’×•×™×” ××—×™"); }
    }

    function setTab(tabId) {
        document.querySelectorAll('.editor-section').forEach(s => s.classList.remove('active'));
        document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
        document.getElementById(tabId).classList.add('active');
        event.currentTarget.classList.add('active');
    }

    function liveUpdate() {
        const title = document.getElementById('h-title').value;
        const sub = document.getElementById('h-sub').value;
        const btn = document.getElementById('h-btn').value;
        const color = document.getElementById('h-color').value;
        const mode = document.getElementById('h-mode').value;

        document.getElementById('p-title').innerText = title;
        document.getElementById('p-sub').innerText = sub;
        document.getElementById('p-btn').innerText = btn;
        document.getElementById('p-btn').style.background = color;
        
        const mockup = document.getElementById('site-preview');
        if(mode === 'dark') {
            mockup.style.background = '#1d1d1f';
            mockup.style.color = 'white';
        } else {
            mockup.style.background = 'white';
            mockup.style.color = '#1d1d1f';
        }
    }

    async function loadData() {
        const res = await fetch(`${API}/get-content`);
        const data = await res.json();
        document.getElementById('h-title').value = data.hero.title;
        document.getElementById('h-sub').value = data.hero.subtitle;
        document.getElementById('h-btn').value = data.buttons.main;
        document.getElementById('h-color').value = data.config.primaryColor;
        liveUpdate();
    }

    async function finalSave() {
        const newContent = {
            config: { primaryColor: document.getElementById('h-color').value, darkMode: document.getElementById('h-mode').value === 'dark' },
            hero: { title: document.getElementById('h-title').value, subtitle: document.getElementById('h-sub').value },
            buttons: { main: document.getElementById('h-btn').value }
        };

        const res = await fetch(`${API}/update-content`, {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify({ password: masterPassword, newContent })
        });

        if(res.ok) alert("××–×œ ×˜×•×‘! ×”××ª×¨ ×¢×•×“×›×Ÿ ×—×™.");
    }
</script>
</body>
</html>
