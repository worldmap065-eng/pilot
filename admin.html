<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Pilot Studio | Canvas Engine</title>
    <link href="https://fonts.googleapis.com/css2?family=SF+Pro+Display:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root { --apple-blue: #0071e3; --bg: #0b0b0c; --panel: #1c1c1e; --border: rgba(255,255,255,0.1); }
        * { box-sizing: border-box; font-family: 'SF Pro Display', sans-serif; }
        body { margin: 0; background: var(--bg); color: white; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }

        /* ×¡×¨×’×œ ×¢×œ×™×•×Ÿ */
        .top-nav { height: 55px; background: #000; border-bottom: 1px solid var(--border); display: flex; align-items: flex-end; padding: 0 20px; gap: 5px; }
        .tab { padding: 10px 25px; background: #1c1c1e; border-radius: 10px 10px 0 0; font-size: 13px; color: #86868b; cursor: pointer; transition: 0.2s; border: 1px solid var(--border); border-bottom: none; }
        .tab.active { background: var(--apple-blue); color: white; border-color: var(--apple-blue); }

        .studio-container { flex: 1; display: flex; overflow: hidden; }

        /* ×¡×¨×’×œ ×¦×“ ×™××™×Ÿ */
        .sidebar { width: 280px; background: var(--panel); border-left: 1px solid var(--border); padding: 20px; display: flex; flex-direction: column; gap: 15px; }
        .asset-item { padding: 15px; background: rgba(255,255,255,0.03); border: 1px solid var(--border); border-radius: 12px; cursor: grab; font-size: 14px; text-align: center; transition: 0.2s; }
        .asset-item:hover { border-color: var(--apple-blue); background: rgba(255,255,255,0.08); }

        /* ×§× ×‘×¡ ×¢×¨×™×›×” */
        .canvas-wrapper { flex: 1; position: relative; background: #111; display: flex; justify-content: center; align-items: flex-start; overflow: auto; padding: 50px; background-image: radial-gradient(#222 1px, transparent 1px); background-size: 30px 30px; }
        
        .artboard {
            width: 1000px; min-height: 1200px; background: white; border-radius: 4px;
            box-shadow: 0 50px 100px rgba(0,0,0,0.5); position: relative;
        }

        /* ×”-Iframe ×©××¦×™×’ ××ª ×”××ª×¨ ×©×œ×›× */
        #site-preview {
            width: 100%; height: 100%; border: none; position: absolute; top: 0; left: 0; 
            pointer-events: none; /* ×—×©×•×‘: ×××¤×©×¨ ×œ×’×¨×•×¨ ××œ×× ×˜×™× ××¢×œ×™×• */
        }

        /* ×¡×¨×’×œ ×›×œ×™× ×¦×£ */
        #element-tools {
            position: absolute; background: #2c2c2e; padding: 6px; border-radius: 10px;
            display: none; gap: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); z-index: 1000;
            border: 1px solid #444; align-items: center;
        }
        .tool-icon { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; cursor: pointer; border-radius: 6px; transition: 0.2s; font-size: 16px; }
        .tool-icon:hover { background: #444; }

        .save-btn { position: fixed; bottom: 30px; left: 30px; padding: 15px 40px; background: white; color: black; border-radius: 30px; font-weight: 700; cursor: pointer; border: none; transition: 0.3s; z-index: 2000; }
    </style>
</head>
<body>

<nav class="top-nav">
    <div class="tab active">index.html (×“×£ ×”×‘×™×ª)</div>
</nav>

<div class="studio-container">
    <aside class="sidebar">
        <div style="color: #86868b; font-size: 11px; font-weight: 700; text-transform: uppercase;">×¡×¤×¨×™×™×”</div>
        <div class="asset-item" draggable="true" ondragstart="handleDragStart(event, 'h1')">×›×•×ª×¨×ª ğŸ“</div>
        <div class="asset-item" draggable="true" ondragstart="handleDragStart(event, 'p')">×¤×¡×§×” ğŸ“„</div>
        <div class="asset-item" draggable="true" ondragstart="handleDragStart(event, 'button')">×›×¤×ª×•×¨ ğŸ”˜</div>
    </aside>

    <main class="canvas-wrapper">
        <div id="artboard" class="artboard">
            <iframe id="site-preview" src="index.html"></iframe>
        </div>
    </main>
</div>

<div id="element-tools">
    <div class="tool-icon" onclick="changeColor('#0071e3')" style="color:#0071e3;">ğŸ”µ</div>
    <div class="tool-icon" onclick="changeColor('#ff3b30')" style="color:#ff3b30;">ğŸ”´</div>
    <div class="tool-icon" onclick="deleteActiveElement()" style="color:#ff3b30;">ğŸ—‘ï¸</div>
</div>

<button class="save-btn" onclick="alert('×”××ª×¨ ×¤×•×¨×¡×!')">×¤×¨×¡× ××ª×¨</button>

<script>
    let activeElement = null;
    const artboard = document.getElementById('artboard');

    function handleDragStart(e, type) { e.dataTransfer.setData('type', type); }

    artboard.ondragover = (e) => e.preventDefault();
    artboard.ondrop = (e) => {
        e.preventDefault();
        const type = e.dataTransfer.getData('type');
        const el = document.createElement(type === 'button' ? 'button' : type);
        el.innerText = type === 'button' ? "×œ×—×¥ ×›××Ÿ" : "×˜×§×¡×˜ ×—×“×©";
        el.style.position = "absolute";
        
        const rect = artboard.getBoundingClientRect();
        el.style.left = (e.clientX - rect.left) + "px";
        el.style.top = (e.clientY - rect.top) + "px";
        el.style.zIndex = "100";

        if(type === 'button') {
            el.style.padding = "12px 24px"; el.style.background = "#0071e3";
            el.style.color = "white"; el.style.border = "none"; el.style.borderRadius = "12px";
        }
        
        makeDraggable(el);
        artboard.appendChild(el);
    };

    function makeDraggable(el) {
        let isDragging = false;
        el.addEventListener('mousedown', (e) => {
            e.stopPropagation();
            isDragging = true;
            activeElement = el;
            showTools(el);
            let shiftX = e.clientX - el.getBoundingClientRect().left;
            let shiftY = e.clientY - el.getBoundingClientRect().top;

            function moveAt(pageX, pageY) {
                const rect = artboard.getBoundingClientRect();
                el.style.left = (pageX - rect.left - shiftX) + 'px';
                el.style.top = (pageY - rect.top - shiftY) + 'px';
                showTools(el);
            }
            function onMouseMove(e) { if(isDragging) moveAt(e.pageX, e.pageY); }
            document.addEventListener('mousemove', onMouseMove);
            document.onmouseup = () => { isDragging = false; document.removeEventListener('mousemove', onMouseMove); };
        });
        el.addEventListener('dblclick', () => { el.contentEditable = true; el.focus(); });
    }

    function showTools(el) {
        const tools = document.getElementById('element-tools');
        const rect = el.getBoundingClientRect();
        tools.style.display = 'flex';
        tools.style.top = (rect.top - 50) + 'px';
        tools.style.left = rect.left + 'px';
    }

    function changeColor(color) {
        if(activeElement) {
            if(activeElement.tagName === 'BUTTON') activeElement.style.backgroundColor = color;
            else activeElement.style.color = color;
        }
    }

    function deleteActiveElement() {
        if(activeElement) { activeElement.remove(); document.getElementById('element-tools').style.display = 'none'; }
    }
</script>
</body>
</html>
